analysis_match_data <-  match.data(question1d_match)
match_table <- tbl_summary(analysis_match_data, include = c("occupation", "employment_impact_laid_off",
"money_fetting_by", "age_groups",
"gender", "identity_lgbtq", "identity_bipoc", "income", "own_rent"),
by = employment_impact_laid_off,
label = list(occupation ~ "Occupation",
money_fetting_by ~ "I am just getting by financially.",
age_groups ~ "Age",
gender ~ "Gender",
identity_lgbtq ~ "Sexual or gender minority (e.g., LGBTQ2+)",
identity_bipoc ~ "Person of colour (e.g., Black, Indigenous, Asian  or other racialized minority)",
income ~ "Income",
own_rent ~ "Dwelling Ownership",
money_fetting_by ~ "I am just getting by financially"),
missing = "no",
type = list(identity_lgbtq ~ "categorical",
identity_bipoc ~ "categorical",
occupation ~ "categorical",
age_groups ~ "categorical",
income ~ "categorical",
own_rent ~ "categorical",
gender ~ "categorical",
money_fetting_by ~ "categorical")) %>%
add_p(test = everything() ~ "fisher.test")
match_table
nalysis_match_data$money_fetting_by <- as.factor(analysis_match_data$money_fetting_by)
analysis_match_data$money_fetting_by <- as.factor(analysis_match_data$money_fetting_by)
analysis_match_data$money_fetting_by <- relevel(analysis_match_data$money_fetting_by, ref = "Yes")
phq_lm <- lm(phq_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
phq_lm
summary(phq_lm)
analysis_match_data <-  match.data(question1d_match)
analysis_match_data$money_fetting_by <- as.factor(analysis_match_data$money_fetting_by)
analysis_match_data$money_fetting_by <- relevel(analysis_match_data$money_fetting_by, ref = "Yes")
phq_lm <- lm(phq_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
gad_lm <- lm(gad_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
summary(gad_lm)
phq_lm <- lm(phq_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
phq_lm
summary(phq_lm)
summary(gad_lm)
question1d_match <- matchit(employment_impact_laid_off ~ occupation + age_groups + gender + identity_lgbtq +
identity_bipoc + income + own_rent,
data = analysis_data,
method = "nearest",
replace = TRUE,
distance = "scaled_euclidean",
verbose = TRUE)
analysis_match_data <-  match.data(question1d_match)
match_table <- tbl_summary(analysis_match_data, include = c("occupation", "employment_impact_laid_off",
"money_fetting_by", "age_groups",
"gender", "identity_lgbtq", "identity_bipoc", "income", "own_rent"),
by = employment_impact_laid_off,
label = list(occupation ~ "Occupation",
money_fetting_by ~ "I am just getting by financially.",
age_groups ~ "Age",
gender ~ "Gender",
identity_lgbtq ~ "Sexual or gender minority (e.g., LGBTQ2+)",
identity_bipoc ~ "Person of colour (e.g., Black, Indigenous, Asian  or other racialized minority)",
income ~ "Income",
own_rent ~ "Dwelling Ownership",
money_fetting_by ~ "I am just getting by financially"),
missing = "no",
type = list(identity_lgbtq ~ "categorical",
identity_bipoc ~ "categorical",
occupation ~ "categorical",
age_groups ~ "categorical",
income ~ "categorical",
own_rent ~ "categorical",
gender ~ "categorical",
money_fetting_by ~ "categorical")) %>%
add_p(test = everything() ~ "fisher.test")
match_table <- tbl_summary(analysis_match_data, include = c("occupation", "employment_impact_laid_off",
"money_fetting_by", "age_groups",
"gender", "identity_lgbtq", "identity_bipoc", "income", "own_rent"),
by = employment_impact_laid_off,
label = list(occupation ~ "Occupation",
money_fetting_by ~ "I am just getting by financially.",
age_groups ~ "Age",
gender ~ "Gender",
identity_lgbtq ~ "Sexual or gender minority (e.g., LGBTQ2+)",
identity_bipoc ~ "Person of colour (e.g., Black, Indigenous, Asian  or other racialized minority)",
income ~ "Income",
own_rent ~ "Dwelling Ownership",
money_fetting_by ~ "I am just getting by financially"),
missing = "no",
type = list(identity_lgbtq ~ "categorical",
identity_bipoc ~ "categorical",
occupation ~ "categorical",
age_groups ~ "categorical",
income ~ "categorical",
own_rent ~ "categorical",
gender ~ "categorical",
money_fetting_by ~ "categorical")) %>%
add_p(test = everything() ~ "fisher.test")
match_table
match_table
summary(phq_lm)
summary(gad_lm)
analysis_match <- matchit(employment_impact_laid_off ~ occupation + age_groups + gender + identity_lgbtq +
identity_bipoc + income + own_rent,
data = analysis_data,
method = "nearest",
replace = TRUE,
distance = "scaled_euclidean",
verbose = TRUE)
summary(analysis_match)
analysis_match_data <-  match.data(analysis_match)
analysis_match <- matchit(employment_impact_laid_off ~ occupation + age_groups + gender + identity_lgbtq +
identity_bipoc + income + own_rent,
data = analysis_data,
method = "nearest",
replace = TRUE,
distance = "scaled_euclidean",
verbose = TRUE)
summary(analysis_match)
analysis_match_data <-  match.data(analysis_match)
unmatched_table <- tbl_summary(analysis_data, include = c("occupation", "employment_impact_laid_off",
"money_fetting_by", "age_groups",
"gender", "identity_lgbtq", "identity_bipoc", "income", "own_rent"),
by = employment_impact_laid_off,
label = list(occupation ~ "Occupation",
money_fetting_by ~ "I am just getting by financially.",
age_groups ~ "Age",
gender ~ "Gender",
identity_lgbtq ~ "Sexual or gender minority (e.g., LGBTQ2+)",
identity_bipoc ~ "Person of colour (e.g., Black, Indigenous, Asian  or other racialized minority)",
income ~ "Income",
own_rent ~ "Dwelling Ownership"),
missing = "no",
type = list(identity_lgbtq ~ "categorical",
identity_bipoc ~ "categorical",
occupation ~ "categorical",
age_groups ~ "categorical",
income ~ "categorical",
own_rent ~ "categorical",
gender ~ "categorical",
money_fetting_by ~ "categorical")) %>%
add_p(test = everything() ~ "fisher.test")
match_table <- tbl_summary(analysis_match_data, include = c("occupation", "employment_impact_laid_off",
"money_fetting_by", "age_groups",
"gender", "identity_lgbtq", "identity_bipoc", "income", "own_rent"),
by = employment_impact_laid_off,
label = list(occupation ~ "Occupation",
money_fetting_by ~ "I am just getting by financially.",
age_groups ~ "Age",
gender ~ "Gender",
identity_lgbtq ~ "Sexual or gender minority (e.g., LGBTQ2+)",
identity_bipoc ~ "Person of colour (e.g., Black, Indigenous, Asian  or other racialized minority)",
income ~ "Income",
own_rent ~ "Dwelling Ownership",
money_fetting_by ~ "I am just getting by financially"),
missing = "no",
type = list(identity_lgbtq ~ "categorical",
identity_bipoc ~ "categorical",
occupation ~ "categorical",
age_groups ~ "categorical",
income ~ "categorical",
own_rent ~ "categorical",
gender ~ "categorical",
money_fetting_by ~ "categorical")) %>%
add_p(test = everything() ~ "fisher.test")
balance_table <- tbl_merge(tbls = list(unmatched_table,
match_table),
tab_spanner = c("UnMatched Balance Table",
"Nearest Neighbour Matched Balance Table")) %>%
as_gt %>%
gt::gtsave(file = "//Users//aidanbodner//Desktop//balance_table.rtf")
# Check to see if models are different including matched variables as covariates in the regression
analysis_match_data$money_fetting_by <- as.factor(analysis_match_data$money_fetting_by)
analysis_match_data$money_fetting_by <- relevel(analysis_match_data$money_fetting_by, ref = "Yes")
phq_lm <- lm(phq_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
phq_lm_w_cov <- lm(phq_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by + occupation + age_groups + gender + identity_lgbtq + identity_bipoc + income + own_rent, data = analysis_match_data)
summary(phq_lm)
summary(phq_lm_w_cov)
gad_lm <- lm(gad_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
gad_lm_w_cov <- lm(gad_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by + occupation + age_groups + gender + identity_lgbtq + identity_bipoc + income + own_rent, data = analysis_match_data)
summary(gad_lm)
summary(gad_lm_w_cov)
msummary(models = list("PHQ-2" = phq_lm,
"GAD-2" = gad_lm),
stars=c('*' = .1, '**' = .05, '***' = .01),
output = "//Users//aidanbodner//Desktop//regression_table.rtf")
#the regressions including the covariates and excluding them look similar and thus it can be noted that our match is of sufficient quality to run the regression without including the covariates
summary(phq_lm)
summary(phq_lm_w_cov)
summary(phq_lm)
summary(phq_lm_w_cov)
summary(gad_lm)
summary(gad_lm_w_cov)
summary(gad_lm)
summary(gad_lm_w_cov)
summary(gad_lm)
summary(gad_lm_w_cov)
summary(gad_lm)
summary(gad_lm_w_cov)
msummary(models = list("PHQ-2" = phq_lm,
"GAD-2" = gad_lm),
stars=c('*' = .1, '**' = .05, '***' = .01),
output = "//Users//aidanbodner//Desktop//regression_table.rtf")
# Check to see if models are different including matched variables as covariates in the regression
analysis_match_data$money_fetting_by <- as.factor(analysis_match_data$money_fetting_by)
analysis_match_data$money_fetting_by <- relevel(analysis_match_data$money_fetting_by, ref = "Yes")
phq_lm <- lm(phq_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
phq_lm_w_cov <- lm(phq_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by + occupation + age_groups + gender + identity_lgbtq + identity_bipoc + income + own_rent, data = analysis_match_data)
summary(phq_lm)
summary(phq_lm_w_cov)
gad_lm <- lm(gad_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
gad_lm_w_cov <- lm(gad_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by + occupation + age_groups + gender + identity_lgbtq + identity_bipoc + income + own_rent, data = analysis_match_data)
summary(gad_lm)
summary(gad_lm_w_cov)
msummary(models = list("PHQ-2" = phq_lm,
"GAD-2" = gad_lm),
stars=c('*' = .1, '**' = .05, '***' = .01),
output = "//Users//aidanbodner//Desktop//regression_table.rtf")
#the regressions including the covariates and excluding them look similar and thus it can be noted that our match is of sufficient quality to run the regression without including the covariates
match_table
unmatched_table
unmatched_table <- tbl_summary(analysis_data, include = c("occupation", "employment_impact_laid_off",
"money_fetting_by", "age_groups",
"gender", "identity_lgbtq", "identity_bipoc", "income", "own_rent"),
by = employment_impact_laid_off,
label = list(occupation ~ "Occupation",
money_fetting_by ~ "I am just getting by financially.",
age_groups ~ "Age",
gender ~ "Gender",
identity_lgbtq ~ "Sexual or gender minority (e.g., LGBTQ2+)",
identity_bipoc ~ "Person of colour (e.g., Black, Indigenous, Asian  or other racialized minority)",
income ~ "Income",
own_rent ~ "Dwelling Ownership"),
missing = "no",
type = list(identity_lgbtq ~ "categorical",
identity_bipoc ~ "categorical",
occupation ~ "categorical",
age_groups ~ "categorical",
income ~ "categorical",
own_rent ~ "categorical",
gender ~ "categorical",
money_fetting_by ~ "categorical")) %>%
add_p(test = everything() ~ "fisher.test")
unmatched_table <- tbl_summary(analysis_data, include = c("occupation", "employment_impact_laid_off",
"money_fetting_by", "age_groups",
"gender", "identity_lgbtq", "identity_bipoc", "income", "own_rent"),
by = employment_impact_laid_off,
label = list(occupation ~ "Occupation",
money_fetting_by ~ "I am just getting by financially.",
age_groups ~ "Age",
gender ~ "Gender",
identity_lgbtq ~ "Sexual or gender minority (e.g., LGBTQ2+)",
identity_bipoc ~ "Person of colour (e.g., Black, Indigenous, Asian  or other racialized minority)",
income ~ "Income",
own_rent ~ "Dwelling Ownership"),
missing = "no",
type = list(identity_lgbtq ~ "categorical",
identity_bipoc ~ "categorical",
occupation ~ "categorical",
age_groups ~ "categorical",
income ~ "categorical",
own_rent ~ "categorical",
gender ~ "categorical",
money_fetting_by ~ "categorical")) %>%
add_p(test = everything() ~ "fisher.test", simulate.p.value = TRUE)
chisq.test(analysis_data$employment_impact_laid_off, analysis_data$occupation)
fisher.test(analysis_data$employment_impact_laid_off, analysis_data$occupation)
chisq.test(analysis_data$employment_impact_laid_off, analysis_data$occupation)
unmatched_table <- tbl_summary(analysis_data, include = c("occupation", "employment_impact_laid_off",
"money_fetting_by", "age_groups",
"gender", "identity_lgbtq", "identity_bipoc", "income", "own_rent"),
by = employment_impact_laid_off,
label = list(occupation ~ "Occupation",
money_fetting_by ~ "I am just getting by financially.",
age_groups ~ "Age",
gender ~ "Gender",
identity_lgbtq ~ "Sexual or gender minority (e.g., LGBTQ2+)",
identity_bipoc ~ "Person of colour (e.g., Black, Indigenous, Asian  or other racialized minority)",
income ~ "Income",
own_rent ~ "Dwelling Ownership"),
missing = "no",
type = list(identity_lgbtq ~ "categorical",
identity_bipoc ~ "categorical",
occupation ~ "categorical",
age_groups ~ "categorical",
income ~ "categorical",
own_rent ~ "categorical",
gender ~ "categorical",
money_fetting_by ~ "categorical")) %>%
add_p(test = everything() ~ "chisq.test")
unmatched_table
match_table <- tbl_summary(analysis_match_data, include = c("occupation", "employment_impact_laid_off",
"money_fetting_by", "age_groups",
"gender", "identity_lgbtq", "identity_bipoc", "income", "own_rent"),
by = employment_impact_laid_off,
label = list(occupation ~ "Occupation",
money_fetting_by ~ "I am just getting by financially.",
age_groups ~ "Age",
gender ~ "Gender",
identity_lgbtq ~ "Sexual or gender minority (e.g., LGBTQ2+)",
identity_bipoc ~ "Person of colour (e.g., Black, Indigenous, Asian  or other racialized minority)",
income ~ "Income",
own_rent ~ "Dwelling Ownership",
money_fetting_by ~ "I am just getting by financially"),
missing = "no",
type = list(identity_lgbtq ~ "categorical",
identity_bipoc ~ "categorical",
occupation ~ "categorical",
age_groups ~ "categorical",
income ~ "categorical",
own_rent ~ "categorical",
gender ~ "categorical",
money_fetting_by ~ "categorical")) %>%
add_p(test = everything() ~ "chisq.test")
match_table
unmatched_table
match_table
analysis_data$gad_clinical_cut <- ifelse(analysis_data$gad_total >= 3,1,0) #creating a binary variable based on the clinical cut off of GAD-2
analysis_data$phq_clinical_cut <- ifelse(analysis_data$phq_total >= 3,1,0)
gad_table <- table(analysis_data$money_fetting_by, analysis_data$gad_clinical_cut, analysis_data$employment_impact_laid_off)
prop.table(gad_table, 1)*100
gad_mantel <- mantelhaen.test(gad_table)
phq_table <- table(analysis_data$money_fetting_by, analysis_data$phq_clinical_cut, analysis_data$employment_impact_laid_off)
prop.table(phq_table, 1)*100
phq_mantel <- mantelhaen.test(phq_table)
gad_table
prop.table(gad_table, 1)*100
gad_mantel <- mantelhaen.test(gad_table)
gad_mantel
phq_table <- table(analysis_data$money_fetting_by, analysis_data$phq_clinical_cut, analysis_data$employment_impact_laid_off)
phq_table
prop.table(phq_table, 1)*100
summary(analysis_match)
knitr::opts_chunk$set(echo = TRUE)
library(here)
library(dplyr)
library(ggplot2)
library(tidyverse)
library(ggrepel)
library(ggtext)
library(showtext)
library(stringr)
library(fastDummies)
library(modelsummary)
library(lubridate)
library(gtsummary)
library(fixest)
library(quantreg)
library(binsreg) # For binscatters
library(nprobust) # Local linear regression
name <- Sys.info()
name[7]
assign_data <- read.csv("a3_p1_sourdough_trends.csv")
#create column new_date to change the date variable into dates
assign_data$date <- str_replace_all(assign_data$date, "T00:00:00Z", "")
assign_data$new_date <- ymd(assign_data$date)
class(assign_data$new_date)
hq1_line_graph <- ggplot(assign_data, aes(x = date, y = hits, colour = keyword, group = keyword)) +
theme_classic()  + geom_vline(xintercept = assign_data$date[75], show.legend = FALSE) + annotate("text", x=assign_data$date[70], y=86, label="Start of Pandemic ", angle=90) + geom_line() +  scale_x_discrete(breaks = c("2020-01-01",
"2020-02-01",
"2020-03-01",
"2020-04-01",
"2020-05-01",
"2020-06-01",
"2020-07-01",
"2020-08-01")) + ggtitle("Interest in Food Types Over Time")
hq1_line_graph
# Look at plot at pre-treatment, to gauge trend lines and similarities or differences:
hq1_line_graph + coord_cartesian(xlim= c(0,76))
#we can see before the start of the pandemic sourdough looked similar to cereal but did not look anything like soup or sandwich so considering droping thos
assign_data$date = as.Date(assign_data$date)
prior_trends_data <- assign_data %>% mutate(treated = ifelse(keyword == "sourdough", 1, 0),
interaction = ifelse(keyword == "sourdough",date,0))
prior_trends_data <- prior_trends_data %>% filter(date < "2020-03-15")
prior_trends_test<- lm(hits ~ date + interaction, data=prior_trends_data)
msummary(list("all_controls" = prior_trends_test), vcov=c(rep("robust",1)), fmt = "%#.5f",
stars=c('*' = .1, '**' = .05, '***' = .01))
prior_trends_test_droppedcontrols <- prior_trends_data %>% filter(keyword %in% c("sourdough","cereal"))
new_prior_trends_test<- lm(hits ~ date + interaction, data=prior_trends_test_droppedcontrols)
msummary(list("dropped_controls"=new_prior_trends_test), vcov=c(rep("robust",1)), fmt = "%#.5f",
stars=c('*' = .1, '**' = .05, '***' = .01))
knitr::opts_chunk$set(echo = TRUE)
library(MatchIt) # For matching
citation("MatchIt")
analysis_data <- read.csv("/Users/aidanbodner/Documents/GitHub/HAD5744-Group-Project/1. Data/imputed_data.csv")
analysis_match <- matchit(employment_impact_laid_off ~ occupation + age_groups + gender + identity_lgbtq +
identity_bipoc + income + own_rent,
data = analysis_data,
method = "nearest",
replace = TRUE,
distance = "scaled_euclidean",
verbose = TRUE)
summary(analysis_match)
analysis_match_data$money_fetting_by <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
analysis_match_data <-  match.data(analysis_match)
analysis_match_data$money_fetting_by <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
analysis_match_data$employment_impact_laid_off <- ifelse(analysis_match_data$employment_impact_laid_off == 'Yes', 1, 0)
View(analysis_match_data)
phq_lm <- lm(phq_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
summary(phq_lm)
analysis_data <- read.csv("/Users/aidanbodner/Documents/GitHub/HAD5744-Group-Project/1. Data/imputed_data.csv")
analysis_match_data$money_fetting_by_yes <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
analysis_match_data$money_fetting_by_no <- ifelse(analysis_match_data$money_fetting_by == 'No', 1, 0)
analysis_match_data$employment_impact_laid_off_yes <- ifelse(analysis_match_data$employment_impact_laid_off == 'Yes', 1, 0)
analysis_match_data$employment_impact_laid_off_no <- ifelse(analysis_match_data$employment_impact_laid_off == 'No', 1, 0)
library(fastDummies)
phq_lm <- lm(phq_total ~ employment_impact_laid_off +
analysis_match_data$money_fetting_by_yes:analysis_match_data$employment_impact_laid_off_yes +
analysis_match_data$money_fetting_by_yes:analysis_match_data$employment_impact_laid_off_no +
analysis_match_data$money_fetting_by_no:analysis_match_data$employment_impact_laid_off_yes +
analysis_match_data$money_fetting_by_no:analysis_match_data$employment_impact_laid_off_no,
data = analysis_match_data)
summary(phq_lm)
phq_lm <- lm(phq_total ~ employment_impact_laid_off +
analysis_match_data$money_fetting_by_yes:analysis_match_data$employment_impact_laid_off_yes +
analysis_match_data$money_fetting_by_yes:analysis_match_data$employment_impact_laid_off_no +
analysis_match_data$money_fetting_by_no:analysis_match_data$employment_impact_laid_off_yes,
data = analysis_match_data)
summary(phq_lm)
analysis_data <- read.csv("/Users/aidanbodner/Documents/GitHub/HAD5744-Group-Project/1. Data/imputed_data.csv")
analysis_match_data$money_fetting_by_yes <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
View(analysis_match_data)
analysis_match_data$money_fetting_by_yes <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
analysis_match_data$money_fetting_by <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
analysis_match_data <-  match.data(analysis_match)
analysis_match_data$money_fetting_by <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
analysis_match_data <-  match.data(analysis_match)
analysis_match_data$money_fetting_by <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
View(analysis_match_data)
View(analysis_match_data)
analysis_match_data$money_fetting_by <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
analysis_match_data <-  match.data(analysis_match)
analysis_match_data$money_fetting_by_yes <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
analysis_match_data$money_fetting_by_no <- ifelse(analysis_match_data$money_fetting_by == 'No', 1, 0)
analysis_match_data$employment_impact_laid_off_yes <- ifelse(analysis_match_data$employment_impact_laid_off == 'Yes', 1, 0)
analysis_match_data$employment_impact_laid_off_no <- ifelse(analysis_match_data$employment_impact_laid_off == 'No', 1, 0)
phq_lm <- lm(phq_total ~ employment_impact_laid_off +
analysis_match_data$money_fetting_by_yes:analysis_match_data$employment_impact_laid_off_yes +
analysis_match_data$money_fetting_by_yes:analysis_match_data$employment_impact_laid_off_no +
analysis_match_data$money_fetting_by_no:analysis_match_data$employment_impact_laid_off_yes +
analysis_match_data$money_fetting_by_no:analysis_match_data$employment_impact_laid_off_no,
data = analysis_match_data)
summary(phq_lm)
knitr::opts_chunk$set(echo = TRUE)
library(here) # for file organization
knitr::opts_chunk$set(echo = TRUE)
library(fastDummies) # To create dummy variables
knitr::opts_chunk$set(echo = TRUE)
here()
assign_data <- read.csv("Dataset 1.csv") # assign data to an object
knitr::opts_chunk$set(echo = TRUE)
Dataset1 <- read.csv("Dataset 1_Clean.csv")
knitr::opts_chunk$set(echo = TRUE)
Dataset1[, 2:19] <- lapply(Dataset1[, 2:19], as.numeric)
knitr::opts_chunk$set(echo = TRUE)
Dataset1$continent <- countrycode(sourcevar = Dataset1[,"Country"],
origin = "country.name",
destination = "continent")
knitr::opts_chunk$set(echo = TRUE)
library(countrycode) # Used to get continents from countries
knitr::opts_chunk$set(echo = TRUE)
Dataset1$continent <- countrycode(sourcevar = Dataset1[,"Country"],
origin = "country.name",
destination = "continent")
view(Dataset1)
?view
knitr::opts_chunk$set(echo = TRUE)
view(Dataset1)
knitr::opts_chunk$set(echo = TRUE)
Dataset1 <- dummy_cols(Dataset1, select_columns = "continent") #used fast dummies to make dummy variables
knitr::opts_chunk$set(echo = TRUE)
continet_regression <- lm(LEBF20052~log(HXPC2005)+log(GDPPCUS2005) + continent_Africa +
continent_Americas + continent_Asia + continent_Europe
+ continent_Oceania, Dataset1)
knitr::opts_chunk$set(echo = TRUE)
Regression_table4 <- msummary(list("continent_reg"=continet_regression),
stars=c('*' = .1, '**' = .05, '***' = .01),
fmt = 5,  statistic = c("conf.int",  "standard error = {std.error}",
"p-value = {p.value}"))
knitr::opts_chunk$set(echo = TRUE)
continet_regression
analysis_data <- read.csv("/Users/aidanbodner/Documents/GitHub/HAD5744-Group-Project/1. Data/imputed_data.csv")
analysis_match <- matchit(employment_impact_laid_off ~ occupation + age_groups + gender + identity_lgbtq +
identity_bipoc + income + own_rent,
data = analysis_data,
method = "nearest",
replace = TRUE,
distance = "scaled_euclidean",
verbose = TRUE)
summary(analysis_match)
analysis_match_data <-  match.data(analysis_match)
analysis_match_data$money_fetting_by <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
analysis_match_data$employment_impact_laid_off <- ifelse(analysis_match_data$employment_impact_laid_off == 'Yes', 1, 0)
analysis_match_data$money_fetting_by <- as.factor(analysis_match_data$money_fetting_by)
analysis_match_data$money_fetting_by <- relevel(analysis_match_data$money_fetting_by, ref = "Yes")
analysis_match_data$money_fetting_by <- as.factor(analysis_match_data$money_fetting_by)
analysis_match_data$money_fetting_by <- relevel(analysis_match_data$money_fetting_by, ref = 1)
phq_lm <- lm(phq_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
summary(phq_lm)
analysis_match_data <-  match.data(analysis_match)
analysis_match_data$money_fetting_by <- ifelse(analysis_match_data$money_fetting_by == 'Yes', 1, 0)
analysis_match_data$employment_impact_laid_off <- ifelse(analysis_match_data$employment_impact_laid_off == 'Yes', 1, 0)
phq_lm <- lm(phq_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
summary(phq_lm)
gad_lm <- lm(gad_total ~ employment_impact_laid_off + employment_impact_laid_off:money_fetting_by, data = analysis_match_data)
summary(gad_lm)
msummary(models = list("PHQ-2" = phq_lm,
"GAD-2" = gad_lm),
stars=c('*' = .1, '**' = .05, '***' = .01),
output = "//Users//aidanbodner//Desktop//regression_table.rtf")
library(modelsummary) # For regression tables
msummary(models = list("PHQ-2" = phq_lm,
"GAD-2" = gad_lm),
stars=c('*' = .1, '**' = .05, '***' = .01),
output = "//Users//aidanbodner//Desktop//regression_table.rtf")
